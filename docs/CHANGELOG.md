<!-- This changelog was generated by Claude Code -->

# Changelog

## [v0.4.0](https://github.com/nym21/importmap/releases/tag/v0.4.0) - 2026-01-23

### New Features
#### `importmap`
- CSS files now generate `<link rel="stylesheet">` tags instead of modulepreload links, enabling proper stylesheet loading ([source](https://github.com/nym21/importmap/blob/v0.4.0/src/lib.rs#L150-L172))
- CSS output order matches the original HTML order, preserving cascade correctness for dependent stylesheets
- Added `extract_href_values()` helper to parse existing stylesheet links from HTML and determine correct ordering ([source](https://github.com/nym21/importmap/blob/v0.4.0/src/lib.rs#L194-L208))
- CSS files are excluded from the importmap JSON object (only JS/MJS files included)
- Skip files containing `.test.` in filename (e.g., `utils.test.js`)
- Skip files in any directory named `tests`

### Internal Changes
#### `importmap`
- Output order changed to: stylesheet links → importmap script → modulepreload links

[View changes](https://github.com/nym21/importmap/compare/v0.3.1...v0.4.0)

---

## [v0.3.1](https://github.com/nym21/importmap/releases/tag/v0.3.1) - 2026-01-22

### New Features
#### `importmap`
- Skip files with underscore prefix (`_*`) during scanning, allowing exclusion of partials and internal files (e.g., `_variables.css`, `_utils.js`) ([source](https://github.com/nym21/importmap/blob/v0.3.1/src/lib.rs#L76-L79))

[View changes](https://github.com/nym21/importmap/compare/v0.3.0...v0.3.1)

---

## [v0.3.0](https://github.com/nym21/importmap/releases/tag/v0.3.0) - 2026-01-17

### Breaking Changes
#### `importmap`
- `ImportMap` changed from struct with `imports` field to tuple struct `ImportMap(BTreeMap<String, String>)` - access pattern changed from `map.imports` to `map.0` or via `Deref` ([source](https://github.com/nym21/importmap/blob/v0.3.0/src/lib.rs#L17))
- Removed `serde::Serialize` derive from `ImportMap` - JSON is now generated manually

### New Features
#### `importmap`
- Added `embedded` feature flag for compile-time embedded directory support via `include_dir` crate ([source](https://github.com/nym21/importmap/blob/v0.3.0/Cargo.toml#L16-L18))
- Added `scan_embedded()` method to scan directories embedded at compile time using `include_dir!` macro ([source](https://github.com/nym21/importmap/blob/v0.3.0/src/include_dir.rs#L9-L14))
- Added `strip_hash()` function to reverse hash insertion (`foo.abc12345.js` → `foo.js`) ([source](https://github.com/nym21/importmap/blob/v0.3.0/src/lib.rs#L103-L120))
- Extended supported file extensions to include `json` and `wasm` (previously: js, mjs, css)
- Made constants public as associated constants: `EXTENSIONS`, `HASH_LEN`, `MARKER_OPEN`, `MARKER_CLOSE` ([source](https://github.com/nym21/importmap/blob/v0.3.0/src/lib.rs#L27-L30))
- Added `Deref` implementation for direct access to underlying BTreeMap ([source](https://github.com/nym21/importmap/blob/v0.3.0/src/lib.rs#L19-L24))
- Added `Clone`, `Default`, `PartialEq` trait implementations

### Internal Changes
#### `importmap`
- Replaced `walkdir` crate with `std::fs::read_dir` for directory traversal
- Extracted `process_file()` method to share file processing logic between filesystem and embedded scanning

[View changes](https://github.com/nym21/importmap/compare/v0.2.0...v0.3.0)

---

## [v0.2.0](https://github.com/nym21/importmap/releases/tag/v0.2.0) - 2026-01-14

### Breaking Changes
#### `importmap`
- Renamed `update_html()` to `transform_html()` - existing callers must update method name ([source](https://github.com/nym21/importmap/blob/v0.2.0/src/lib.rs#L112))

### New Features
#### `importmap`
- Added `update_html_file()` method that handles file I/O directly: reads file, transforms content, writes back only if modified ([source](https://github.com/nym21/importmap/blob/v0.2.0/src/lib.rs#L96-L107))
- `update_html_file()` returns `Ok(true)` if file was modified, `Ok(false)` if unchanged, preventing unnecessary disk writes

### Internal Changes
#### `importmap`
- CLI binary simplified to use `update_html_file()` instead of manual read/transform/write sequence

[View changes](https://github.com/nym21/importmap/compare/v0.1.3...v0.2.0)

---

## [v0.1.3](https://github.com/nym21/importmap/releases/tag/v0.1.3) - 2026-01-12

### New Features
#### `importmap`
- Added `empty()` constructor to create an empty ImportMap for development mode ([source](https://github.com/nym21/importmap/blob/v0.1.3/src/lib.rs#L25-L30))
- Development mode support: when import map is empty, content between markers is cleared instead of generating tags ([source](https://github.com/nym21/importmap/blob/v0.1.3/src/lib.rs#L101-L103))

### Internal Changes
#### `importmap`
- Added `MARKER` constant for the HTML marker name

[View changes](https://github.com/nym21/importmap/compare/v0.1.2...v0.1.3)

---

## [v0.1.2](https://github.com/nym21/importmap/releases/tag/v0.1.2) - 2026-01-12

### Bug Fixes
#### `importmap`
- Fixed output order: importmap script tag now appears before modulepreload links (previously links came first) ([source](https://github.com/nym21/importmap/blob/v0.1.2/src/lib.rs#L99))

[View changes](https://github.com/nym21/importmap/compare/v0.1.1...v0.1.2)

---

## [v0.1.1](https://github.com/nym21/importmap/releases/tag/v0.1.1) - 2026-01-08

### New Features
#### `importmap`
- Initial release of the `importmap` crate for generating import maps with cache-busting hashed URLs
- `ImportMap` struct with BTreeMap-based storage for import mappings ([source](https://github.com/nym21/importmap/blob/v0.1.1/src/lib.rs#L17-L20))
- `scan()` method to walk directories and generate content-hashed URLs using rapidhash ([source](https://github.com/nym21/importmap/blob/v0.1.1/src/lib.rs#L23-L91))
- Hash-based URL transformation: `foo.js` becomes `foo.a1b2c3d4.js` for cache busting
- `update_html()` method to insert modulepreload links and importmap script tags between `<!-- IMPORTMAP -->` markers ([source](https://github.com/nym21/importmap/blob/v0.1.1/src/lib.rs#L93-L102))
- Automatic indentation detection and preservation when updating HTML ([source](https://github.com/nym21/importmap/blob/v0.1.1/src/lib.rs#L104-L131))
- File filtering: skips root-level JS files (e.g., service workers), development builds (`.development.`, `.dev.`)
- Supports `js`, `mjs`, and `css` file extensions
- CLI binary for processing directories: `importmap [dir]` ([source](https://github.com/nym21/importmap/blob/v0.1.1/src/main.rs))
